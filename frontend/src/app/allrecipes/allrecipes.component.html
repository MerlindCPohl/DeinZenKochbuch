<div class="container mt-4">
  <h2 class="text-center mb-4">Alle Rezepte</h2>

  <!-- suchfeld und dropdown-->
  <div class="search-wrapper position-relative w-75 mx-auto mb-3">
    <input
      type="text"
      [(ngModel)]="suchbegriff"
      (input)="sucheVorschlaege()"
      placeholder="🔍 Suche nach einem Rezept oder einer Zutat"
      class="form-control pe-5" />

    <!--button für sucheingabe löscen-->
    <button
      *ngIf="suchbegriff"
      type="button"
      (click)="suchbegriff = ''; vorschlaege = []"
      class="btn btn-danger btn-sm rounded-2 position-absolute end-0 top-50 translate-middle-y me-2"
      style="width: 30px; height: 30px; line-height: 1; padding: 0;"
      aria-label="Eingabe löschen">
      ✕
    </button>
    <!-- dropdown -->
    <ul *ngIf="vorschlaege.length > 0" class="list-group dropdown-list position-absolute w-100 zindex-dropdown">
      <li
        class="list-group-item list-group-item-action"
        *ngFor="let v of vorschlaege"
        (click)="vorschlagAuswaehlen(v)">
        {{ v.begriff }}
        <small class="text-muted float-end">({{ v.typ }})</small>
      </li>
    </ul>
  </div>

<!--rezepte in cards-->
  <div class="row">
    <div class="col-12 mb-2" *ngFor="let rezept of paginierteRezepte">
      <div
        class="card recipe-card shadow-sm p-3 d-flex flex-row mb-4 justify-content-between align-items-center"
        (click)="zeigeDetails(rezept.id)"
        (mousedown)="$event.preventDefault()"
        role="button"
        tabindex="0"
      >
        <span>{{ ersetzeUmlauteUndSonderzeichen(rezept.name) }}</span>
        <mat-icon style="color: #722a35;">visibility</mat-icon>
      </div>
    </div>
  </div>

  <!--seiten pagination-->
  <div class="pagination-wrapper d-flex justify-content-center mt-4">
    <button class="btn btn-outline-secondary me-2" [disabled]="seite === 1" (click)="vorherigeSeite()">
      &#8592; Zurück
    </button>
    <span class="align-self-center">{{ seite }}</span>
    <button class="btn btn-outline-secondary ms-2" [disabled]="seite * seitenGroesse >= allRecipes.length" (click)="naechsteSeite()">
      Weiter &#8594;
    </button>
  </div>
  <div style="height: 60px;"></div>
</div>

<!-- Rezept-Detail Modal -->
<div class="modal-backdrop" *ngIf="ausgewaehlt && rezept">
  <div class="modal-content p-4 shadow rounded bg-white">
    <button (click)="schliessen()" class="btn-close position-absolute top-0 end-0 m-3" aria-label="Close"></button>


    <h2 class="text-center mb-4">{{ rezept.name }}</h2>

    <div class="text-center mb-3">
      <span class="badge badge-pill badge-light text-dark border me-2" *ngIf="rezept.vegetarisch"> 🧀 Vegetarisch</span>
      <span class="badge badge-pill badge-light text-dark border me-2" *ngIf="rezept.vegan"> 🌱 Vegan</span>
      <span class="badge badge-pill badge-light text-dark border me-2" *ngIf="rezept.rohkost"> 🥑 Rohkost</span>
      <span class="badge badge-pill badge-light text-dark border me-2" *ngIf="rezept.glutenfrei"> 🌾 Glutenfrei</span>
    </div>

    <h5>Zutaten:</h5>
    <ul class="list-group mb-3">
      <li class="list-group-item" *ngFor="let zutat of rezept.zutaten">
        {{ zutat.name }} - {{ zutat.menge }} {{ zutat.mengeneinheit }}
      </li>
    </ul>

    <h5>Zubereitung:</h5>
    <p>{{ rezept.anleitung }}</p>
  </div>
</div>
